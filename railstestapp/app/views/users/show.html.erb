<h1>User Page</h1>
<p id="notice"><%= notice %></p>

<p>
  <strong>User Name:</strong>
  <%= @user.username %>
</p>
<p>
  <strong>User ID:</strong>
  <%= @user.id %>
</p>

<p>
  <strong>Email:</strong>
  <%= @user.email %>
</p>

<p>
  <strong>Dm:</strong>
  <%= @user.dm %>
</p>

<p>
  <strong>Roles:</strong>
  <%= @user.roles %>
</p>

<%= link_to 'Edit Prof', edit_user_path(@user) %>
<br>
<h2>Books</h2>
<table>
  <thead>
    <tr>
      <th>Title</th>
      <th>Body</th>
      <th>Like Count</th>
      <th>Created at</th>
      <th colspan="3"></th>
    </tr>
  </thead>
  <tbody>
    <% @user.books.each do |book| %>
      <tr>
        <td><%= book.title %></td>
        <td><%= book.body %></td>
        <td><%= book.likes_count %></td>
        <td><%= book.created_at %></td>
        <td><%= link_to 'Show', book %></td>
        <td><%= link_to 'Edit', edit_book_path(book) %></td>
        <td><%= link_to 'Destroy', book, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<%= link_to 'Add New Book', new_book_path %> |
<%= link_to 'Show All', books_path %>

<h2>Likes By You</h2>
<table>
  <thead>
    <tr>
      <th>このユーザーがいいねしたUser</th>
      <th>Book ID</th>
      <th>Book Title</th>
      <th>Like Count</th>
      <th colspan="3"></th>
    </tr>
  </thead>
  <tbody>
    <% @like_list_by.each do |like| %>
      <tr>
        <td><%= like.user.username %></td>
        <td><%= like.id %></td>
        <td><%= like.title %></td>
        <td><%= like.likes_count %></td>
        <td><%= link_to 'Show', book_path(like.id) %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<h2>Likes From Others</h2>
<table>
  <thead>
    <tr>
      <th>このユーザにいいねしたUser</th>
      <th>Book ID</th>
      <th>Book Title</th>
      <th colspan="3"></th>
    </tr>
  </thead>
  <tbody>
    <% @like_list_from.each do |like| %>
      <tr>
        <td><%= like.user.username %></td>
        <td><%= like.book_id %></td>
        <td><%= like.book.title %></td>
        <td><%= link_to 'Show', book_path(like.book_id) %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<h2>Your Chat Rooms</h2>
<table>
  <thead>
    <tr>
      <th>Room Name</th>
      <th>Room ID</th>
      <th>Room Members</th>
      <th colspan="3"></th>
    </tr>
  </thead>
  <tbody>
    <% @user.rooms.distinct.each do |room| %>
      <tr>
        <td><%= room.name %></td>
        <td><%= room.id %></td>
        <td><%= link_to 'Show', room_path(room.id) %></td>
      </tr>
    <% end %>
  </tbody>
</table>